<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>네일팁 사이즈 추천기</title>
  <style>
    @font-face {
      font-family: 'Pretendard-Regular';
      src: url('https://fastly.jsdelivr.net/gh/Project-Noonnu/noonfonts_2107@1.1/Pretendard-Regular.woff') format('woff');
      font-weight: 400;
      font-style: normal;
    }
    html, body { height:100%; margin:0; }
    body {
      font-family:'Pretendard-Regular', sans-serif;
      background: linear-gradient(145deg, #e5f0e2, #b9ccb5);
      padding:30px; text-align:center; font-size:18px; min-height:100vh;
    }
    h1 { color:#333; margin-bottom:20px; font-size:28px; }
    input {
      padding:12px; width:160px; font-size:17px; margin-right:10px;
      border:1px solid #aaa; border-radius:6px;
    }
    button {
      padding:12px 18px; font-size:17px; background:#7e9e85; color:#fff; border:none;
      border-radius:8px; cursor:pointer; box-shadow:0 4px 8px rgba(0,0,0,.15);
      transition: background-color .3s, transform .2s;
    }
    button:hover { background:#6d8973; transform: translateY(-2px); }
    table {
      width:100%; max-width:720px; margin:30px auto; border-collapse:collapse;
      background:#fff; font-size:16px; border-radius:12px; overflow:hidden;
      box-shadow:0 2px 6px rgba(0,0,0,.1);
    }
    th, td { border:1px solid #ccc; padding:12px; }
    th { background:#a9c5ad; }
    .shape-cell {
      display:flex; align-items:center; gap:10px;
    }
    .shape-icon {
      width:36px; height:36px; object-fit:contain; flex-shrink:0;
    }
  </style>
</head>
<body>
  <h1>손톱 사이즈 찾기</h1>
  <input type="number" step="0.1" id="inputWidth" placeholder="가로폭 입력 (mm)" />
  <button onclick="findSizes()">추천 받기</button>

  <table>
    <thead>
      <tr>
        <th>쉐입</th>
        <th>추천 호수</th>
        <th>가로(mm)</th>
        <th>세로(mm)</th>
      </tr>
    </thead>
    <tbody id="resultBody"></tbody>
  </table>

<script>
const shapeToIcon = {
  "숏오발": "icon/short_oval.png",
  "숏코핀": "icon/short_coffin.png",
  "숏라운드": "icon/short_round.png",
  "숏아몬드": "icon/short_almond.png",
  "오발": "icon/oval.png",
  "코핀": "icon/coffin.png",
  "아몬드": "icon/almond.png",
  "스퀘어": "icon/square.png"
};

  
const sizeData = {
  "숏오발": {
    1: { width: 13.0, height: 20.0 },
    2: { width: 11.7, height: 19.2 },
    3: { width: 10.6, height: 17.4 },
    4: { width: 9.7, height: 16.7 },
    5: { width: 9.2, height: 15.4 },
    6: { width: 8.9, height: 15.0 },
    7: { width: 8.5, height: 14.7 },
    8: { width: 7.5, height: 14.1 },
    9: { width: 7.0, height: 13.7 },
    10: { width: 6.0, height: 13.0 }
  },
  "숏코핀": {
    0: { width: 14.16, height: 19.1 },
    1: { width: 13.18, height: 18.66 },
    2: { width: 12.17, height: 18.06 },
    3: { width: 11.73, height: 17.6 },
    4: { width: 10.98, height: 17.15 },
    5: { width: 10.48, height: 16.64 },
    6: { width: 9.99, height: 16.28 },
    7: { width: 9.06, height: 15.86 },
    8: { width: 8.57, height: 15.12 },
    9: { width: 7.87, height: 14.72 },
    10: { width: 7.2, height: 14.0 },
    11: { width: 6.47, height: 14.02 }
  },
  "숏라운드": {
    0: { width: 12.37, height: 16.2 },
    1: { width: 11.79, height: 15.9 },
    2: { width: 11.09, height: 15.74 },
    3: { width: 10.31, height: 14.55 },
    4: { width: 9.70, height: 14.24 },
    5: { width: 9.56, height: 14.1 },
    6: { width: 9.06, height: 14.04 },
    7: { width: 8.93, height: 13.83 },
    8: { width: 8.54, height: 13.42 },
    9: { width: 8.15, height: 12.09 },
    10: { width: 7.86, height: 12.09 },
    11: { width: 6.71, height: 10.97 }
  },
  "숏아몬드": {
    0: { width: 13.08, height: 19.1 },
    1: { width: 12.73, height: 19.01 },
    2: { width: 11.76, height: 18.84 },
    3: { width: 10.81, height: 18.18 },
    4: { width: 10.37, height: 17.65 },
    5: { width: 10.1, height: 17.07 },
    6: { width: 9.56, height: 16.58 },
    7: { width: 9.33, height: 15.83 },
    8: { width: 8.83, height: 15.35 },
    9: { width: 7.96, height: 13.98 },
    10: { width: 7.33, height: 13.74 }
  },
  "오발": {
    0: { width: 14.0, height: 24 },
    1: { width: 13.0, height: 23 },
    2: { width: 12.0, height: 22 },
    3: { width: 11.0, height: 21 },
    4: { width: 10.0, height: 20 },
    5: { width: 9.5, height: 19 },
    6: { width: 9.0, height: 18 },
    7: { width: 8.0, height: 17 },
    8: { width: 7.5, height: 16 },
    9: { width: 6.5, height: 15 }
  },
  "코핀": {
    0: { width: 13.5, height: 26 },
    1: { width: 12.5, height: 25 },
    2: { width: 12.0, height: 25 },
    3: { width: 11.5, height: 24 },
    4: { width: 10.5, height: 23 },
    5: { width: 10.0, height: 22.5 },
    6: { width: 9.0, height: 22 },
    7: { width: 8.0, height: 21 },
    8: { width: 7.5, height: 21 },
    9: { width: 7.0, height: 20 }
  },
  "아몬드": {
    0: { width: 13.6, height: 24.8 },
    1: { width: 13.51, height: 24.1 },
    2: { width: 11.41, height: 23.52 },
    3: { width: 11.35, height: 23.17 },
    4: { width: 10.98, height: 21.65 },
    5: { width: 10.21, height: 21.32 },
    6: { width: 8.83, height: 20.22 },
    7: { width: 7.31, height: 19.46 },
    8: { width: 7.09, height: 18.75 },
    9: { width: 6.79, height: 18.0 }
  },
  "스퀘어": {
    0: { width: 11, height: 24 },
    1: { width: 10.5, height: 23 },
    2: { width: 10.5, height: 22.5 },
    3: { width: 10, height: 22.5 },
    4: { width: 9.5, height: 22 },
    5: { width: 9.5, height: 21.5 },
    6: { width: 9, height: 21.5 },
    7: { width: 8.5, height: 21 },
    8: { width: 8, height: 21 },
    9: { width: 7.5, height: 20.5 },
    10: { width: 7, height: 19 },
    11: { width: 6, height: 19 }
  }
};

function findSizes() {
  try {
    const inputEl = document.getElementById("inputWidth");
    const tbody = document.getElementById("resultBody");
    if (!inputEl || !tbody) {
      console.error("필수 엘리먼트를 찾지 못했습니다.");
      return;
    }

    const input = parseFloat(inputEl.value);
    tbody.innerHTML = "";
    if (isNaN(input)) return;

    const EPS = 1e-6;

    Object.entries(sizeData).forEach(([shape, sizes]) => {
      const entries = Object.entries(sizes).map(([num, obj]) => ({
        num: Number(num),
        width: obj.width,
        height: obj.height,
        diff: Math.abs(input - obj.width)
      }));

      const minDiff = Math.min(...entries.map(e => e.diff));
      const matched = entries
        .filter(e => Math.abs(e.diff - minDiff) <= EPS)
        .sort((a, b) => a.num - b.num);

      const hosuStr = matched.map(e => `${e.num}호`).join(" / ");
      const widthList = Array.from(new Set(matched.map(e => e.width.toString())));
      const widthStr = widthList.join(" / ") + " mm";
      const heightStr = matched.map(e => e.height).join(" / ") + " mm";

      const iconSrc = shapeToIcon[shape] || "";
      const row = `<tr>
        <td class="shape-cell">
          ${iconSrc ? `<img class="shape-icon" src="${iconSrc}" alt="${shape}">` : ""}
          <span>${shape}</span>
        </td>
        <td>${hosuStr}</td>
        <td>${widthStr}</td>
        <td>${heightStr}</td>
      </tr>`;
      tbody.insertAdjacentHTML("beforeend", row);
    });
  } catch (err) {
    console.error("findSizes 실행 중 오류:", err);
  }
}

// DOM 준비 후 엔터/입력/클릭 이벤트 모두 연결
document.addEventListener("DOMContentLoaded", () => {
  const inputEl = document.getElementById("inputWidth");
  const btn = document.querySelector("button");

  if (btn) btn.addEventListener("click", findSizes);
  if (inputEl) {
    inputEl.addEventListener("keydown", (e) => {
      if (e.key === "Enter") findSizes();
    });
    inputEl.addEventListener("input", () => {
      // 즉시 미리보기 원치 않으면 이 줄은 주석 처리
      if (inputEl.value !== "") findSizes();
    });
  }

  console.log("events bound");
});
</script>
